<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <atom:link href="https://kangduu.github.io/website/website/rss.xml" rel="self" type="application/rss+xml"/>
    <title>å¤§çœ¼çŒ«çœ‹å‰ç«¯</title>
    <link>https://kangduu.github.io/website/website/</link>
    <description>HTMLã€CSSã€JavaScriptã€TypeScriptã€Reactã€Vue...</description>
    <language>zh-CN</language>
    <pubDate>Mon, 16 May 2022 15:34:39 GMT</pubDate>
    <lastBuildDate>Mon, 16 May 2022 15:34:39 GMT</lastBuildDate>
    <generator>@mr-hope/vuepress-plugin-feed</generator>
    <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
    <category>interview</category>
    <category>React</category>
    <item>
      <title>React ç³»åˆ—æ–‡ç« </title>
      <link>https://kangduu.github.io/website/website/case/</link>
      <guid>https://kangduu.github.io/website/website/case/</guid>
      <source url="https://kangduu.github.io/website/website/rss.xml">React ç³»åˆ—æ–‡ç« </source>
      <pubDate>Thu, 05 May 2022 10:01:30 GMT</pubDate>
      <content:encoded><![CDATA[<h1 id="react-ç³»åˆ—æ–‡ç« "> React ç³»åˆ—æ–‡ç« </h1>
]]></content:encoded>
    </item>
    <item>
      <title>Frond End Interview</title>
      <link>https://kangduu.github.io/website/website/interview/</link>
      <guid>https://kangduu.github.io/website/website/interview/</guid>
      <source url="https://kangduu.github.io/website/website/rss.xml">Frond End Interview</source>
      <category>interview</category>
      <pubDate>Thu, 05 May 2022 10:01:30 GMT</pubDate>
      <content:encoded><![CDATA[<GithubIssueList />
]]></content:encoded>
    </item>
    <item>
      <title>Reacté«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰</title>
      <link>https://kangduu.github.io/website/website/react/HOC.html</link>
      <guid>https://kangduu.github.io/website/website/react/HOC.html</guid>
      <source url="https://kangduu.github.io/website/website/rss.xml">Reacté«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰</source>
      <category>React</category>
      <pubDate>Mon, 16 May 2022 14:56:12 GMT</pubDate>
      <content:encoded><![CDATA[<ol>
<li></li>
<li>æœ‰å‡ ç§é«˜é˜¶ç»„ä»¶ï¼ˆå®ç°ï¼‰ï¼Ÿå„ç§çš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>ä½ å¹³æ—¶æ˜¯å¦‚ä½•å†™é«˜é˜¶ç»„ä»¶çš„ï¼Ÿ</li>
<li>HOC æ€ä¹ˆå¤„ç†é™æ€å±æ€§ã€è·¨å±‚çº§ ref ç­‰é—®é¢˜ï¼Ÿ</li>
<li>é«˜é˜¶ç»„ä»¶æ€ä¹ˆæ§åˆ¶æ¸²æŸ“ï¼Ÿéš”ç¦»æ¸²æŸ“ï¼Ÿ</li>
<li>é«˜é˜¶ç»„ä»¶å¦‚ä½•ç›‘è§†åŸå§‹ç»„ä»¶çŠ¶æ€ï¼Ÿ</li>
</ol>
<h2 id="ä»€ä¹ˆæ˜¯é«˜é˜¶ç»„ä»¶"> ä»€ä¹ˆæ˜¯é«˜é˜¶ç»„ä»¶ï¼Ÿ</h2>
<p><a href="https://react.docschina.org/docs/higher-order-components.html" target="_blank" rel="noopener noreferrer">ğŸ™‹ é«˜é˜¶ç»„ä»¶</a> æ˜¯ <strong>å‚æ•°ä¸ºç»„ä»¶</strong>ï¼Œ<strong>è¿”å›å€¼ä¸ºæ–°ç»„ä»¶</strong> çš„ <strong>å‡½æ•°</strong></p>
<div><pre><code><span>const</span> EnhancedComponent <span>=</span> <span>higherOrderComponent</span><span>(</span>WrappedComponent<span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br></div></div><p>ğŸ¤” <strong>Questionsï¼š</strong> é«˜é˜¶ç»„ä»¶ä¸ç»„ä»¶ä¹‹é—´çš„å·®åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>ğŸ™‹ <strong>Answerï¼š</strong> ç»„ä»¶æ˜¯å°† props å’Œ state è½¬åŒ–ä¸º UIï¼Œè€Œé«˜é˜¶ç»„ä»¶æ˜¯å°†ç»„ä»¶è½¬æ¢ä¸ºå¦ä¸€ä¸ªç»„ä»¶ã€‚</p>
<p>ä¸ºäº†åæœŸç»´æŠ¤æ–¹ä¾¿ã€‚<u>æœ€å¥½æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œå°½é‡ä¸è¦æœ‰å‰¯ä½œç”¨ã€‚</u></p>
<h2 id="é«˜é˜¶ç»„ä»¶è§£å†³äº†å“ªäº›é—®é¢˜-é«˜é˜¶ç»„ä»¶äº§ç”Ÿçš„åˆè¡·"> é«˜é˜¶ç»„ä»¶è§£å†³äº†å“ªäº›é—®é¢˜ï¼Ÿï¼ˆé«˜é˜¶ç»„ä»¶äº§ç”Ÿçš„åˆè¡·ï¼Ÿï¼‰</h2>
<ol>
<li>é€»è¾‘å¤ç”¨</li>
<li>props å¼ºåŒ–</li>
<li>ç»„ä»¶èµ‹èƒ½</li>
<li>æ§åˆ¶æ¸²æŸ“</li>
</ol>
<p>ğŸ¤” <strong>æ€è€ƒï¼š</strong> åœ¨æ²¡æœ‰é«˜é˜¶ç»„ä»¶ä¹‹å‰ï¼Œåˆæ˜¯å¦‚ä½•å¤„ç†è¿™äº›é—®é¢˜çš„å•¦ï¼Ÿ</p>
<h2 id="å¦‚ä½•ä¼˜é›…çš„å†™ä¸€ä¸ªé«˜é˜¶ç»„ä»¶"> å¦‚ä½•ä¼˜é›…çš„å†™ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Ÿ</h2>
<ol>
<li>æ™®é€šæ¨¡å¼</li>
<li>è£…é¥°å™¨</li>
<li>å¤šé«˜é˜¶ç»„ä»¶ç»„åˆ</li>
</ol>
<h2 id="é«˜é˜¶ç»„ä»¶èƒ½ç”¨æ¥åšä»€ä¹ˆ"> é«˜é˜¶ç»„ä»¶èƒ½ç”¨æ¥åšä»€ä¹ˆï¼Ÿ</h2>
<h2 id="è¯´è¯´æˆ‘ä»¬å¹³æ—¶ä½¿ç”¨çš„è½®å­ä¸­ä½¿ç”¨äº†-hoc-æŠ€æœ¯çš„æœ‰å“ªäº›å•¦"> è¯´è¯´æˆ‘ä»¬å¹³æ—¶ä½¿ç”¨çš„è½®å­ä¸­ä½¿ç”¨äº† HOC æŠ€æœ¯çš„æœ‰å“ªäº›å•¦ï¼Ÿ</h2>
<blockquote>
<p>Redux ä¸­çš„ <code>connect()</code></p>
<p>React Router ä¸­çš„ <code>withRoute</code></p>
<p>Relay ä¸­çš„ <code>createFragmentContainer</code></p>
</blockquote>
<h2 id="æ€»ç»“"> æ€»ç»“</h2>
<h2 id="å‚è€ƒæ–‡çŒ®"> å‚è€ƒæ–‡çŒ®</h2>
<ul>
<li><a href="https://juejin.cn/post/6940422320427106335" target="_blank" rel="noopener noreferrer">ã€Œreact è¿›é˜¶ã€ä¸€æ–‡åƒé€ React é«˜é˜¶ç»„ä»¶(HOC)</a></li>
<li><a href="https://juejin.cn/post/6844904050236850184" target="_blank" rel="noopener noreferrer">React é«˜é˜¶ç»„ä»¶(HOC)çš„å…¥é—¨ ğŸ“– åŠå®è·µ ğŸ’»</a></li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>æ·±å…¥æµ…å‡º React ç³»åˆ—</title>
      <link>https://kangduu.github.io/website/website/react/</link>
      <guid>https://kangduu.github.io/website/website/react/</guid>
      <source url="https://kangduu.github.io/website/website/rss.xml">æ·±å…¥æµ…å‡º React ç³»åˆ—</source>
      <description>ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript åº“</description>
      <category>React</category>
      <pubDate>Thu, 05 May 2022 10:01:30 GMT</pubDate>
      <content:encoded><![CDATA[
<div><p>æç¤º</p>
<p>è¿™æ˜¯ä¸€ä¸ªæç¤º</p>
</div>
<div><p>æ³¨æ„</p>
<p>è¿™æ˜¯ä¸€ä¸ªè­¦å‘Š</p>
</div>
<div><p>è­¦å‘Š</p>
<p>è¿™æ˜¯ä¸€ä¸ªå±é™©è­¦å‘Š</p>
</div>
<details><summary>DETAILS</summary>
<p>è¿™æ˜¯ä¸€ä¸ªè¯¦æƒ…å—ï¼Œåœ¨ Internet Explorer / Edge ä¸­ä¸ç”Ÿæ•ˆ</p>
</details>
<h3 id="react-ç»„ä»¶æ¨¡å¼"> React ç»„ä»¶æ¨¡å¼</h3>
<h3 id="é˜…è¯»è§’"> é˜…è¯»è§’</h3>
<ul>
<li><a href="https://overreacted.io/" target="_blank" rel="noopener noreferrer">overreacted</a></li>
<li><a href="https://www.30secondsofcode.org/react/p/1" target="_blank" rel="noopener noreferrer">30 seconds of code with react</a></li>
<li><a href="https://ahooks.js.org/zh-CN" target="_blank" rel="noopener noreferrer">ahooks</a></li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>å®˜æ–¹æ–‡æ¡£</title>
      <link>https://kangduu.github.io/website/website/react/useEffect%E5%92%8CuseLayoutEffect%E7%9A%84%E5%8C%BA%E5%88%AB.html</link>
      <guid>https://kangduu.github.io/website/website/react/useEffect%E5%92%8CuseLayoutEffect%E7%9A%84%E5%8C%BA%E5%88%AB.html</guid>
      <source url="https://kangduu.github.io/website/website/rss.xml">å®˜æ–¹æ–‡æ¡£</source>
      <pubDate>Mon, 16 May 2022 14:56:12 GMT</pubDate>
      <content:encoded><![CDATA[<h2 id="å®˜æ–¹æ–‡æ¡£"> å®˜æ–¹æ–‡æ¡£</h2>
<h3 id="useeffect"> useEffect</h3>
<div><pre><code><span>useEffect</span><span>(</span>didUpdate<span>[</span><span>,</span><span>[</span>dep<span>]</span><span>]</span><span>)</span>
</code></pre>
<div><span>1</span><br></div></div><ol>
<li>
<p>èµ‹å€¼ç»™ <code>useEffect</code> çš„å‡½æ•° didUpdate ä¼šåœ¨<u>ç»„ä»¶æ¸²æŸ“åˆ°å±å¹•ä¹‹å</u>æ‰§è¡Œã€‚ å³å¾…æµè§ˆå™¨å®Œæˆç”»é¢æ¸²æŸ“ä¹‹åæ‰ä¼šå»¶è¿Ÿè°ƒç”¨ <code>useEffect</code> ã€‚</p>
</li>
<li>
<p>æ¸…é™¤å‡½æ•°ï¼ˆdidUpdateçš„è¿”å›å€¼ï¼‰ã€‚ ä¸ºé˜²æ­¢å†…å­˜æ³„æ¼ï¼Œæ¸…é™¤å‡½æ•°ä¼š<u>åœ¨ç»„ä»¶å¸è½½å‰æ‰§è¡Œ</u>ã€‚  å¦‚æœç»„ä»¶å¤šæ¬¡æ¸²æŸ“ï¼ˆé€šå¸¸å¦‚æ­¤ï¼‰ï¼Œåˆ™<strong>åœ¨æ‰§è¡Œä¸‹ä¸€ä¸ª effect ä¹‹å‰ï¼Œä¸Šä¸€ä¸ª effect å°±å·²è¢«æ¸…é™¤</strong>ã€‚</p>
<div><pre><code>useEffect(() =&gt; {
  const subscription = props.source.subscribe();
  return () =&gt; {
    // æ¸…é™¤è®¢é˜…
    subscription.unsubscribe();
  };
});
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div></li>
<li>
<p>ä¸ <code>componentDidMount</code>ã€<code>componentDidUpdate</code> ä¸åŒçš„æ˜¯ï¼Œåœ¨æµè§ˆå™¨å®Œæˆå¸ƒå±€ä¸ç»˜åˆ¶<strong>ä¹‹å</strong>ï¼Œä¼ ç»™ <code>useEffect</code> çš„å‡½æ•°<u>ä¼šå»¶è¿Ÿè°ƒç”¨</u>ã€‚</p>
</li>
<li>
<p>è™½ç„¶ <code>useEffect</code> ä¼šåœ¨æµè§ˆå™¨ç»˜åˆ¶åå»¶è¿Ÿæ‰§è¡Œï¼Œä½†ä¼šä¿è¯åœ¨ä»»ä½•æ–°çš„æ¸²æŸ“å‰æ‰§è¡Œã€‚React å°†åœ¨ç»„ä»¶æ›´æ–°å‰åˆ·æ–°ä¸Šä¸€è½®æ¸²æŸ“çš„ effectã€‚</p>
</li>
</ol>
<p>è¯¦è§<a href="https://react.docschina.org/docs/hooks-reference.html#useeffect" target="_blank" rel="noopener noreferrer">useLayoutEffect</a></p>
<h3 id="uselayouteffect"> useLayoutEffect</h3>
<div><pre><code>useLayoutEffect(didUpdate[,[dep]]);
</code></pre>
<div><span>1</span><br></div></div><p>â€‹		å…¶å‡½æ•°ç­¾åä¸ <code>useEffect</code> ç›¸åŒï¼Œä½†å®ƒ<u>ä¼šåœ¨æ‰€æœ‰çš„ DOM å˜æ›´ä¹‹ååŒæ­¥è°ƒç”¨ effect</u>ã€‚å¯ä»¥ä½¿ç”¨å®ƒæ¥<u><strong>è¯»å– DOM å¸ƒå±€å¹¶åŒæ­¥è§¦å‘é‡æ¸²æŸ“</strong></u>ã€‚åœ¨æµè§ˆå™¨æ‰§è¡Œç»˜åˆ¶ä¹‹å‰ï¼ŒuseLayoutEffect å†…éƒ¨çš„æ›´æ–°è®¡åˆ’å°†è¢«åŒæ­¥åˆ·æ–°ã€‚</p>
<p>â€‹		å°½å¯èƒ½ä½¿ç”¨æ ‡å‡†çš„ useEffect ä»¥é¿å…é˜»å¡è§†è§‰æ›´æ–°ã€‚</p>
<blockquote>
<p><strong>æç¤º</strong></p>
<p>å¦‚æœä½ æ­£åœ¨å°†ä»£ç ä» class ç»„ä»¶è¿ç§»åˆ°ä½¿ç”¨ Hook çš„å‡½æ•°ç»„ä»¶ï¼Œåˆ™<u>éœ€è¦æ³¨æ„ <code>useLayoutEffect</code> ä¸ <code>componentDidMount</code>ã€<code>componentDidUpdate</code> çš„è°ƒç”¨é˜¶æ®µæ˜¯ä¸€æ ·çš„</u>ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬æ¨èä½ <strong>ä¸€å¼€å§‹å…ˆç”¨ <code>useEffect</code></strong>ï¼Œåªæœ‰å½“å®ƒå‡ºé—®é¢˜çš„æ—¶å€™å†å°è¯•ä½¿ç”¨ <code>useLayoutEffect</code>ã€‚</p>
<p>......æœåŠ¡ç«¯æ¸²æŸ“ç›¸å…³å†…å®¹ï¼Œè¯¦è§<a href="https://react.docschina.org/docs/hooks-reference.html#uselayouteffect" target="_blank" rel="noopener noreferrer">useLayoutEffect</a></p>
</blockquote>
<h2 id="æœ€å¤§çš„ä¸åŒ"> æœ€å¤§çš„ä¸åŒ</h2>
<p><strong>è°ƒç”¨æ—¶æœºçš„ä¸åŒ</strong></p>
<ol>
<li><code>useLayoutEffect</code> ä¸ <code>componentDidMount</code>ã€<code>componentDidUpdate</code> çš„è°ƒç”¨é˜¶æ®µæ˜¯ä¸€æ ·çš„ã€‚</li>
<li>åœ¨æµè§ˆå™¨å®Œæˆå¸ƒå±€ä¸ç»˜åˆ¶<strong>ä¹‹å</strong>ï¼Œä¼ ç»™ <code>useEffect</code> çš„å‡½æ•°ä¼šå»¶è¿Ÿè°ƒç”¨ã€‚</li>
</ol>
<p>ğŸŒ°ä¸¾ä¾‹è¯´æ˜useEffectå’ŒuseLayoutEffectçš„è°ƒç”¨æ—¶æœºä¸åŒï¼š</p>
<div><pre><code><span>// Parent.jsx</span>
<span>import</span> React<span>,</span> <span>{</span> Component <span>}</span> <span>from</span> <span>"react"</span><span>;</span>
<span>import</span> Child <span>from</span> <span>"./Child"</span><span>;</span>
<span>export</span> <span>default</span> <span>class</span> <span>Parent</span> <span>extends</span> <span>Component</span> <span>{</span>
  <span>componentDidMount</span><span>(</span><span>)</span> <span>{</span>
    console<span>.</span><span>log</span><span>(</span><span>"[Parent] componentDidMount"</span><span>)</span><span>;</span>
  <span>}</span>
  <span>render</span><span>(</span><span>)</span> <span>{</span>
    <span>return</span> <span><span><span>&lt;</span><span>Child</span></span> <span>/></span></span><span>;</span>
  <span>}</span>
<span>}</span>

<span>// Child.jsx</span>
<span>import</span> React<span>,</span> <span>{</span> useEffect<span>,</span> useLayoutEffect <span>}</span> <span>from</span> <span>"react"</span><span>;</span>
<span>export</span> <span>default</span> <span>function</span> <span>Test</span><span>(</span><span>)</span> <span>{</span>
  <span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=></span> <span>{</span>
    console<span>.</span><span>log</span><span>(</span><span>"[Child] useEffect mount"</span><span>)</span><span>;</span>
  <span>}</span><span>,</span> <span>[</span><span>]</span><span>)</span><span>;</span>
  <span>useLayoutEffect</span><span>(</span><span>(</span><span>)</span> <span>=></span> <span>{</span>
    console<span>.</span><span>log</span><span>(</span><span>"[Child] useLayoutEffect mount"</span><span>)</span><span>;</span>
  <span>}</span><span>,</span> <span>[</span><span>]</span><span>)</span><span>;</span>
  <span>return</span> <span><span><span>&lt;</span>div</span><span>></span></span><span>Child</span><span><span><span>&lt;/</span>div</span><span>></span></span><span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br></div></div><p>ğŸ™‹ <em><strong>Answerï¼š</strong></em> ä¸Šè¿°æ¡ˆä¾‹çš„æ—¥å¿—ç»“æœå¦‚ä¸‹ã€‚</p>
<div><pre><code>[Child] useLayoutEffect mount   // å­ç»„ä»¶æŒ‚è½½å®Œæˆ
[Parent] componentDidMount		// çˆ¶ç»„ä»¶æŒ‚è½½å®Œæˆ
[Child] useEffect mount			// useEffectå»¶è¿Ÿè°ƒç”¨äº†
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><h2 id="ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨uselayouteffect"> ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨useLayoutEffectï¼Ÿ</h2>
<p>åœ¨æµè§ˆå™¨æ‰§è¡Œä¸‹ä¸€æ¬¡ç»˜åˆ¶å‰ï¼Œç”¨æˆ·å¯è§çš„ DOM å˜æ›´å¿…é¡»åŒæ­¥æ‰§è¡Œï¼Œè¿™æ ·ç”¨æˆ·æ‰ä¸ä¼šæ„Ÿè§‰åˆ°è§†è§‰ä¸Šçš„ä¸ä¸€è‡´ ã€‚</p>
]]></content:encoded>
    </item>
    <item>
      <title>React@18 æ–°ç‰¹æ€§</title>
      <link>https://kangduu.github.io/website/website/react/%E3%80%90React_V18%E3%80%91react@18+%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html</link>
      <guid>https://kangduu.github.io/website/website/react/%E3%80%90React_V18%E3%80%91react@18+%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html</guid>
      <source url="https://kangduu.github.io/website/website/rss.xml">React@18 æ–°ç‰¹æ€§</source>
      <category>React</category>
      <pubDate>Mon, 16 May 2022 14:56:12 GMT</pubDate>
      <content:encoded><![CDATA[<h3 id="react-18"> React 18</h3>
<ul>
<li>
<p><a href="./[æ€§èƒ½ä¼˜åŒ–]React.flushSyncå¤„ç†å¼‚æ­¥æ‰¹é‡setStateå¯¼è‡´å¤šæ¬¡æ›´æ–°.html">Automatic batching è‡ªåŠ¨æ‰¹å¤„ç†</a></p>
</li>
<li>
<p>New APIS</p>
<ul>
<li>concurrent features
<ul>
<li><a href="https://reactjs.org/docs/react-api.html#starttransition" target="_blank" rel="noopener noreferrer">React.startTransition()</a></li>
<li><a href="https://reactjs.org/docs/hooks-reference.html#usedeferredvalue" target="_blank" rel="noopener noreferrer">useDeferredValue()</a></li>
<li><a href="https://reactjs.org/docs/hooks-reference.html#usetransition" target="_blank" rel="noopener noreferrer">useTransition()</a></li>
</ul>
</li>
<li>mostly for libraries
<ul>
<li><a href="https://reactjs.org/docs/hooks-reference.html#useid" target="_blank" rel="noopener noreferrer">useId()</a></li>
<li><a href="https://reactjs.org/docs/hooks-reference.html#usesyncexternalstore" target="_blank" rel="noopener noreferrer">useSyncExternalStore()</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p>Suspense on the server</p>
</li>
</ul>
<h3 id="react-dom-18"> react-dom 18</h3>
<ul>
<li>New Render API
<ul>
<li><a href="https://reactjs.org/docs/react-dom-client.html#createroot" target="_blank" rel="noopener noreferrer">ReactDOM.createRoot</a>:éœ€è¦å°†<code>ReactDOM.render</code>åˆ‡æ¢åˆ°<code>ReactDOMã€‚createRoot</code></li>
</ul>
</li>
</ul>
<p><a href="https://www.youtube.com/watch?v=ytudH8je5ko" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ¼”ç¤ºè§†é¢‘</a></p>
]]></content:encoded>
    </item>
    <item>
      <title>Automatic Batching Update</title>
      <link>https://kangduu.github.io/website/website/react/%E3%80%90%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E3%80%91React.flushSync%E4%B8%8EAutomaticBatching.html</link>
      <guid>https://kangduu.github.io/website/website/react/%E3%80%90%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E3%80%91React.flushSync%E4%B8%8EAutomaticBatching.html</guid>
      <source url="https://kangduu.github.io/website/website/rss.xml">Automatic Batching Update</source>
      <category>React</category>
      <pubDate>Mon, 16 May 2022 14:56:12 GMT</pubDate>
      <content:encoded><![CDATA[<h1 id="automatic-batching-update"> Automatic Batching Update</h1>
<h3 id="react-æ˜¯å¦‚ä½•è¿›è¡Œè‡ªåŠ¨æ‰¹å¤„ç†æ›´æ–°çš„"> React æ˜¯å¦‚ä½•è¿›è¡Œè‡ªåŠ¨æ‰¹å¤„ç†æ›´æ–°çš„ï¼Ÿ</h3>
<p><strong>åœ¨ React@18.0.0ä¹‹å‰</strong>ï¼Œæˆ‘ä»¬ä½¿ç”¨ setState æˆ–è€… Hook ä¿®æ”¹çŠ¶æ€åï¼Œå¹¶ä¸ä¼šç«‹å³è§¦å‘é‡æ–°æ¸²æŸ“ã€‚React ä¼šæ‰§è¡Œå…¨éƒ¨äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œç„¶åè§¦å‘ä¸€ä¸ªå•ç‹¬çš„ re-renderï¼Œ<strong>åˆå¹¶æ‰€æœ‰æ›´æ–°</strong>ã€‚ <em>â€”â€” tipsï¼šåªèƒ½å¤„ç†åŒæ­¥ä»»åŠ¡</em></p>
<p>ğŸŒ° å†™ä¸€ä¸ªæ¡ˆä¾‹ï¼Œå®ç°<strong>å¤šæ¬¡</strong>åŒæ­¥è°ƒç”¨ setState æˆ– hooks</p>
<div><pre><code><span>import</span> <span>{</span> useEffect<span>,</span> useState <span>}</span> <span>from</span> <span>"react"</span><span>;</span>

<span>const</span> <span>Increment</span> <span>=</span> <span>(</span><span>)</span> <span>=></span> <span>{</span>
  <span>const</span> <span>[</span>count<span>,</span> setCount<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>0</span><span>)</span><span>;</span>

  <span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=></span> <span>{</span>
    console<span>.</span><span>log</span><span>(</span><span>"count value:"</span><span>,</span> count<span>)</span><span>;</span>
  <span>}</span><span>)</span><span>;</span>

  <span>const</span> <span>incermentHandler</span> <span>=</span> <span>(</span><span>)</span> <span>=></span> <span>{</span>
    <span>setCount</span><span>(</span><span>(</span><span>c</span><span>)</span> <span>=></span> c <span>+</span> <span>1</span><span>)</span><span>;</span>
    <span>setCount</span><span>(</span><span>(</span><span>c</span><span>)</span> <span>=></span> c <span>+</span> <span>1</span><span>)</span><span>;</span>
    <span>setCount</span><span>(</span><span>(</span><span>c</span><span>)</span> <span>=></span> c <span>+</span> <span>1</span><span>)</span><span>;</span>
  <span>}</span><span>;</span>

  <span>return</span> <span><span><span>&lt;</span>button</span> <span>onClick</span><span><span>=</span><span>{</span>incermentHandler<span>}</span></span><span>></span></span><span>ç‚¹å‡»</span><span><span><span>&lt;/</span>button</span><span>></span></span><span>;</span>
<span>}</span><span>;</span>

<span>export</span> <span>default</span> Increment<span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br></div></div><p>å½“æˆ‘ä»¬ç‚¹å‡»æŒ‰é’®åï¼Œæ§åˆ¶å°åº”è¯¥æ‰“å°ä»€ä¹ˆæ—¥å¿—ä¿¡æ¯å•¦ï¼Ÿ</p>
<div><pre><code>count value<span>:</span> <span>1</span>
count value<span>:</span> <span>2</span>
count value<span>:</span> <span>3</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>æ˜¯è¿™æ ·å—ï¼Ÿå¹¶ä¸æ˜¯ã€‚</p>
<p>æ­£ç¡®ç»“æœï¼š</p>
<div><pre><code><span>count value:</span> <span>3</span>
</code></pre>
<div><span>1</span><br></div></div><p>ğŸŒ° åŒæ ·çš„ä»£ç ï¼Œä¿®æ”¹ä¸€ä¸‹å¤„ç†å‡½æ•°è°ƒç”¨ setState æˆ– hooks çš„æ–¹å¼ã€‚</p>
<div><pre><code><span>...</span>

<span>const</span> <span>incermentHandler</span> <span>=</span> <span>(</span><span>)</span> <span>=></span> <span>{</span>
    <span>setTimeout</span><span>(</span><span>(</span><span>)</span> <span>=></span> <span>{</span> <span>// Promise Ajax ...</span>
        <span>setCount</span><span>(</span><span>(</span><span>c</span><span>)</span> <span>=></span> c <span>+</span> <span>1</span><span>)</span><span>;</span>
        <span>setCount</span><span>(</span><span>(</span><span>c</span><span>)</span> <span>=></span> c <span>+</span> <span>1</span><span>)</span><span>;</span>
        <span>setCount</span><span>(</span><span>(</span><span>c</span><span>)</span> <span>=></span> c <span>+</span> <span>1</span><span>)</span><span>;</span>
    <span>}</span><span>,</span> <span>300</span><span>)</span><span>;</span>
<span>}</span><span>;</span>

<span>...</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><p>å¦‚æœä½ åƒä¸Šé¢è¿™æ ·æ›´æ–°çŠ¶æ€ï¼Œconsole æ—¥å¿—ä¿¡æ¯æ‰“å°ç»“æœï¼Ÿ</p>
<div><pre><code>count value<span>:</span> <span>1</span>
count value<span>:</span> <span>2</span>
count value<span>:</span> <span>3</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>æ˜¯çš„ï¼Œå°±æ˜¯æ›´æ–°äº†ä¸‰æ¬¡ã€‚æ„ä¸æ„å¤–ï¼ŒæƒŠä¸æƒŠå–œï¼</p>
<p>è¿˜è®°å¾—ä¸€å¼€å§‹æˆ‘ä»¬è¯´çš„å—ï¼Ÿåˆå¹¶æ‰€æœ‰æ›´æ–°ï¼Œåªèƒ½æ˜¯åŒæ­¥çš„ä»»åŠ¡ã€‚</p>
<p>é‚£æˆ‘ä»¬å°±ä¸èƒ½åœ¨å¼‚æ­¥ä»»åŠ¡ä¸­å¤šæ¬¡ä¿®æ”¹ state äº†å—ï¼Ÿå®Œå…¨å¯ä»¥ï¼Œè€Œä¸”ä¹Ÿå¯ä»¥åªæ›´æ–°ä¸€æ¬¡ã€‚</p>
<h3 id="ä½¿ç”¨reactdom-flushsyncè§£å†³å¼‚æ­¥å¤šæ¬¡ä¿®æ”¹çŠ¶æ€å¯¼è‡´å¤šæ¬¡æ›´æ–°çš„é—®é¢˜"> ä½¿ç”¨<code>ReactDOM.flushSync</code>è§£å†³å¼‚æ­¥å¤šæ¬¡ä¿®æ”¹çŠ¶æ€å¯¼è‡´å¤šæ¬¡æ›´æ–°çš„é—®é¢˜</h3>
<div><pre><code><span>// flushSync</span>
<span>export</span> <span>function</span> <span><span>flushSync</span><span><span>&lt;</span><span>R</span><span>></span></span></span><span>(</span><span>fn</span><span>:</span> <span>(</span><span>)</span> <span>=></span> <span>R</span><span>)</span><span>:</span> <span>R</span><span>;</span>
<span>export</span> <span>function</span> <span><span>flushSync</span><span><span>&lt;</span><span>A</span><span>,</span> <span>R</span><span>></span></span></span><span>(</span><span>fn</span><span>:</span> <span>(</span>a<span>:</span> <span>A</span><span>)</span> <span>=></span> <span>R</span><span>,</span> a<span>:</span> <span>A</span><span>)</span><span>:</span> <span>R</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><div><pre><code><span>import</span> ReactDOM <span>from</span> <span>"react-dom"</span><span>;</span>

<span>...</span>

<span>const</span> <span>incermentHandler</span> <span>=</span> <span>(</span><span>)</span> <span>=></span> <span>{</span>
    <span>setTimeout</span><span>(</span><span>(</span><span>)</span> <span>=></span> <span>{</span>
<span>+</span>        ReactDOM<span>.</span><span>flushSync</span><span>(</span><span>(</span><span>)</span><span>=></span><span>{</span>
            <span>setCount</span><span>(</span><span>(</span><span>c</span><span>)</span> <span>=></span> c <span>+</span> <span>1</span><span>)</span><span>;</span>
            <span>setCount</span><span>(</span><span>(</span><span>c</span><span>)</span> <span>=></span> c <span>+</span> <span>1</span><span>)</span><span>;</span>
            <span>setCount</span><span>(</span><span>(</span><span>c</span><span>)</span> <span>=></span> c <span>+</span> <span>1</span><span>)</span><span>;</span>
<span>+</span>        <span>}</span><span>)</span>
    <span>}</span><span>,</span> <span>300</span><span>)</span><span>;</span>
<span>}</span><span>;</span>

<span>...</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div><h3 id="react-18-ä¹‹åä¾¿ä¸å­˜åœ¨ä»¥ä¸Šé—®é¢˜äº†"> React@18+ä¹‹åä¾¿ä¸å­˜åœ¨ä»¥ä¸Šé—®é¢˜äº†</h3>
<div><pre><code><span>import</span> <span>{</span> <span>FC</span><span>,</span> useEffect<span>,</span> useState <span>}</span> <span>from</span> <span>"react"</span><span>;</span>

<span>const</span> Increment<span>:</span> <span>FC</span><span>&lt;</span><span>any</span><span>></span> <span>=</span> <span>(</span><span>)</span> <span>=></span> <span>{</span>
  <span>const</span> <span>[</span>count<span>,</span> setCount<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>0</span><span>)</span><span>;</span>
  <span>const</span> <span>[</span>flag<span>,</span> setFlag<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>false</span><span>)</span><span>;</span>

  <span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=></span> <span>{</span>
    <span>console</span><span>.</span><span>log</span><span>(</span><span>"[Incerment] Updated:"</span><span>,</span> count<span>,</span> flag<span>)</span><span>;</span>
  <span>}</span><span>)</span><span>;</span>

  <span>const</span> <span>incermentHandler</span> <span>=</span> <span>function</span> <span>(</span><span>)</span> <span>{</span>
    <span>setTimeout</span><span>(</span><span>(</span><span>)</span> <span>=></span> <span>{</span>
      <span>setCount</span><span>(</span><span>(</span>c<span>)</span> <span>=></span> c <span>+</span> <span>1</span><span>)</span><span>;</span>
      <span>setFlag</span><span>(</span><span>(</span>f<span>)</span> <span>=></span> <span>!</span>f<span>)</span><span>;</span>
    <span>}</span><span>,</span> <span>300</span><span>)</span><span>;</span>
  <span>}</span><span>;</span>

  <span>return</span> <span>(</span>
    <span><span><span>&lt;</span></span><span>></span></span><span>
      </span><span><span><span>&lt;</span>p</span><span>></span></span><span>Automatic Batching</span><span><span><span>&lt;/</span>p</span><span>></span></span><span>
      </span><span><span><span>&lt;</span>button</span> <span>onClick</span><span><span>=</span><span>{</span>incermentHandler<span>}</span></span><span>></span></span><span>ç‚¹å‡»å¹¶æŸ¥çœ‹console</span><span><span><span>&lt;/</span>button</span><span>></span></span><span>
    </span><span><span><span>&lt;/</span></span><span>></span></span>
  <span>)</span><span>;</span>
<span>}</span><span>;</span>

<span>export</span> <span>default</span> Increment<span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br></div></div><p>ç‚¹å‡»æŒ‰é’®åï¼Œä½ çœ‹åˆ°çš„æ˜¯</p>
<div><pre><code><span>[</span>Incerment<span>]</span> <span>Updated:</span> <span>1</span> <span>true</span>
</code></pre>
<div><span>1</span><br></div></div><h4 id="react-18-è¿‡åflushsyncåˆèƒ½åšä»€ä¹ˆ"> React 18 è¿‡å<code>flushSync</code>åˆèƒ½åšä»€ä¹ˆ</h4>
<p>ç°åœ¨ä½¿ç”¨ react18 å¯ä»¥å¼€ç®±å³ç”¨çš„å®ç°<code>è‡ªåŠ¨æ‰¹æ›´æ–°</code>ã€‚ä½†æ˜¯æˆ‘ä»¬ç¡®æœ‰éœ€æ±‚åœ¨å¼‚æ­¥ä¸­æå–æ›´æ–°å•¦ï¼Ÿ</p>
<div><pre><code><span>import</span> <span>{</span> <span>FC</span><span>,</span> useEffect<span>,</span> useState <span>}</span> <span>from</span> <span>"react"</span><span>;</span>
<span>import</span> ReactDOM <span>from</span> <span>"react-dom"</span><span>;</span>

<span>const</span> Increment<span>:</span> <span>FC</span><span>&lt;</span><span>any</span><span>></span> <span>=</span> <span>(</span><span>)</span> <span>=></span> <span>{</span>
  <span>const</span> <span>[</span>count<span>,</span> setCount<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>0</span><span>)</span><span>;</span>
  <span>const</span> <span>[</span>flag<span>,</span> setFlag<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>false</span><span>)</span><span>;</span>

  <span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=></span> <span>{</span>
    <span>console</span><span>.</span><span>log</span><span>(</span><span>"[Increment] Updated:"</span><span>,</span> count<span>,</span> flag<span>)</span><span>;</span>
  <span>}</span><span>)</span><span>;</span>

  <span>const</span> <span>incermentHandler</span> <span>=</span> <span>function</span> <span>(</span><span>)</span> <span>{</span>
    <span>setTimeout</span><span>(</span><span>(</span><span>)</span> <span>=></span> <span>{</span>
      <span>setCount</span><span>(</span><span>(</span>c<span>)</span> <span>=></span> c <span>+</span> <span>1</span><span>)</span><span>;</span>
<span>+</span>      ReactDOM<span>.</span><span>flushSync</span><span>(</span><span>(</span><span>)</span> <span>=></span> <span>{</span>
<span>+</span>        <span>setFlag</span><span>(</span><span>(</span>f<span>)</span> <span>=></span> <span>!</span>f<span>)</span><span>;</span>
<span>+</span>      <span>}</span><span>)</span><span>;</span>
      <span>setCount</span><span>(</span><span>(</span>c<span>)</span> <span>=></span> c <span>+</span> <span>1</span><span>)</span><span>;</span>
    <span>}</span><span>,</span> <span>300</span><span>)</span><span>;</span>
  <span>}</span><span>;</span>

  <span>return</span> <span>(</span>
    <span><span><span>&lt;</span></span><span>></span></span><span>
      </span><span><span><span>&lt;</span>p</span><span>></span></span><span>Automatic Batching</span><span><span><span>&lt;/</span>p</span><span>></span></span><span>
      </span><span><span><span>&lt;</span>button</span> <span>onClick</span><span><span>=</span><span>{</span>incermentHandler<span>}</span></span><span>></span></span><span>ç‚¹å‡»å¹¶æŸ¥çœ‹console</span><span><span><span>&lt;/</span>button</span><span>></span></span><span>
    </span><span><span><span>&lt;/</span></span><span>></span></span>
  <span>)</span><span>;</span>
<span>}</span><span>;</span>

<span>export</span> <span>default</span> Increment<span>;</span>

<span>// log</span>
<span>// [Increment] Updated: 0 true</span>
<span>// [Increment] Updated: 2 true</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br></div></div><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥åŒæ­¥æ›´æ–°<code>setFlag</code>äº†ï¼Œå³æ”¹å˜äº†æ›´æ–°çº§åˆ«ã€‚</p>
]]></content:encoded>
    </item>
    <item>
      <title>ä½¿ç”¨memoæˆ–PureComponentå‰çš„æ€è€ƒ</title>
      <link>https://kangduu.github.io/website/website/react/%E3%80%90%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E3%80%91%E4%BD%BF%E7%94%A8memo%E6%88%96PureComponent%E5%89%8D%E7%9A%84%E6%80%9D%E8%80%83.html</link>
      <guid>https://kangduu.github.io/website/website/react/%E3%80%90%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E3%80%91%E4%BD%BF%E7%94%A8memo%E6%88%96PureComponent%E5%89%8D%E7%9A%84%E6%80%9D%E8%80%83.html</guid>
      <source url="https://kangduu.github.io/website/website/rss.xml">ä½¿ç”¨memoæˆ–PureComponentå‰çš„æ€è€ƒ</source>
      <category>React</category>
      <pubDate>Mon, 16 May 2022 14:56:12 GMT</pubDate>
      <content:encoded><![CDATA[<p>åœ¨æˆ‘ä»¬ç¼–å†™ react ç»„ä»¶çš„æ—¶å€™ï¼Œå°½å¯èƒ½çš„æ‹†åˆ†ç»„ä»¶ã€‚è€Œé’ˆå¯¹ä¸€äº›é™æ€ç»„ä»¶æˆ–æ²¡æœ‰ props çš„ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>React.memo</code>æˆ–è€…<code>React.useMemo</code>æ¥é¿å…ä¸å¿…è¦çš„æ›´æ–°ã€‚</p>
<p>###ã€€ä¸€ä¸ªæ¸²æŸ“ç¼“æ…¢çš„ç»„ä»¶</p>
<div><pre><code><span>import</span> <span>{</span> useState <span>}</span> <span>from</span> <span>"react"</span><span>;</span>

<span>function</span> <span>ExpensiveTree</span><span>(</span><span>)</span> <span>{</span>
  <span>let</span> now <span>=</span> performance<span>.</span><span>now</span><span>(</span><span>)</span><span>;</span>
  <span>while</span> <span>(</span>performance<span>.</span><span>now</span><span>(</span><span>)</span> <span>-</span> now <span>&lt;</span> <span>100</span><span>)</span> <span>{</span>
    <span>// Artificial delay -- do nothing for 100ms</span>
  <span>}</span>
  <span>return</span> <span><span><span>&lt;</span>p</span><span>></span></span><span>I am a very slow component tree.</span><span><span><span>&lt;/</span>p</span><span>></span></span><span>;</span>
<span>}</span>

<span>const</span> <span>Demo</span> <span>=</span> <span>(</span><span>)</span> <span>=></span> <span>{</span>
  <span>let</span> <span>[</span>color<span>,</span> setSolor<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>"red"</span><span>)</span><span>;</span>
  <span>return</span> <span>(</span>
    <span><span><span>&lt;</span></span><span>></span></span><span>
      </span><span><span><span>&lt;</span>input</span>
        <span>type</span><span><span>=</span><span>"</span>color<span>"</span></span>
        <span>value</span><span><span>=</span><span>{</span>color<span>}</span></span>
        <span>onChange</span><span><span>=</span><span>{</span><span>(</span><span>e</span><span>)</span> <span>=></span> <span>setSolor</span><span>(</span>e<span>.</span>target<span>.</span>value<span>)</span><span>}</span></span>
        <span>style</span><span><span>=</span><span>{</span><span>{</span> <span>display</span><span>:</span> <span>"inline-block"</span><span>,</span> <span>marginLeft</span><span>:</span> <span>600</span> <span>}</span><span>}</span></span>
      <span>/></span></span><span>
      </span><span><span><span>&lt;</span>p</span> <span>style</span><span><span>=</span><span>{</span><span>{</span> color <span>}</span><span>}</span></span><span>></span></span><span>Hello, world!</span><span><span><span>&lt;/</span>p</span><span>></span></span><span>
      </span><span><span><span>&lt;</span><span>ExpensiveTree</span></span> <span>/></span></span><span>
    </span><span><span><span>&lt;/</span></span><span>></span></span>
  <span>)</span><span>;</span>
<span>}</span><span>;</span>

<span>export</span> <span>default</span> Demo<span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br></div></div><p>ç°åœ¨æˆ‘ä»¬æ¥åˆ†æä¸€æ³¢ï¼Œåœ¨ App ç»„ä»¶ä¸­ï¼Œå½“ color æ”¹å˜æ—¶ï¼Œå¯¼è‡´ ExpensiveTree ç»„ä»¶ä¹Ÿä¼šæ›´æ–°ã€‚</p>
<p>é‡åˆ°è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬ç¬¬ä¸€ååº”æ˜¯ä¸æ˜¯ä½¿ç”¨ <a href="https://react.docschina.org/docs/react-api.html#reactmemo" target="_blank" rel="noopener noreferrer">React.mmo</a>åŒ…è£…ä¸€ä¸‹ï¼Ÿæˆ–æ˜¯å°† class ç»„ä»¶æ”¹ä¸º<a href="https://react.docschina.org/docs/react-api.html#reactpurecomponent" target="_blank" rel="noopener noreferrer">React.PureComponent</a>ç»§æ‰¿å•¦ï¼Ÿ</p>
<div><pre><code><span>import</span> <span>{</span> memo<span>,</span> PureComponent <span>}</span> <span>from</span> <span>"react"</span><span>;</span>

<span>// å‡½æ•°ç»„ä»¶ ä½¿ç”¨memo</span>
<span>const</span> ExpensiveTree <span>=</span> <span>memo</span><span>(</span><span>(</span><span>)</span> <span>=></span> <span>{</span>
  <span>let</span> now <span>=</span> performance<span>.</span><span>now</span><span>(</span><span>)</span><span>;</span>
  <span>while</span> <span>(</span>performance<span>.</span><span>now</span><span>(</span><span>)</span> <span>-</span> now <span>&lt;</span> <span>100</span><span>)</span> <span>{</span>
    <span>// Artificial delay -- do nothing for 100ms</span>
  <span>}</span>
  <span>return</span> <span><span><span>&lt;</span>p</span><span>></span></span><span>I am a very slow component tree.</span><span><span><span>&lt;/</span>p</span><span>></span></span><span>;</span>
<span>}</span><span>)</span><span>;</span>

<span>// class ç»„ä»¶ ç»§æ‰¿PureComponent</span>
<span>class</span> <span>ExpensiveTree</span> <span>extends</span> <span>PureComponent</span> <span>{</span>
  <span>render</span><span>(</span><span>)</span> <span>{</span>
    <span>return</span> <span><span><span>&lt;</span>p</span><span>></span></span><span>I am a very slow component tree.</span><span><span><span>&lt;/</span>p</span><span>></span></span><span>;</span>
  <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br></div></div><p>æˆ–è®¸ï¼Œæˆ‘ä»¬åº”è¯¥ä» React æœ¬è´¨æ¥æ€è€ƒé—®é¢˜ï¼Œæˆ‘ä»¬å†™çš„ç»„ä»¶è¿˜èƒ½ä¸èƒ½å†ä¼˜åŒ–å•¦ï¼Ÿ</p>
<h3 id="è§£æ³•ä¸€-å‘ä¸‹ç§»åŠ¨-state"> è§£æ³•ä¸€ï¼šå‘ä¸‹ç§»åŠ¨ state</h3>
<div><pre><code><span>import</span> <span>{</span> useState <span>}</span> <span>from</span> <span>"react"</span><span>;</span>

<span>const</span> ExpensiveTree <span>=</span> <span>memo</span><span>(</span><span>(</span><span>)</span> <span>=></span> <span>{</span>
  <span>let</span> now <span>=</span> performance<span>.</span><span>now</span><span>(</span><span>)</span><span>;</span>
  <span>while</span> <span>(</span>performance<span>.</span><span>now</span><span>(</span><span>)</span> <span>-</span> now <span>&lt;</span> <span>100</span><span>)</span> <span>{</span>
    <span>// Artificial delay -- do nothing for 100ms</span>
  <span>}</span>
  <span>return</span> <span><span><span>&lt;</span>p</span><span>></span></span><span>I am a very slow component tree.</span><span><span><span>&lt;/</span>p</span><span>></span></span><span>;</span>
<span>}</span><span>)</span><span>;</span>

<span>// å‘ä¸‹ç§»åŠ¨State</span>
<span>function</span> <span>App</span><span>(</span><span>)</span> <span>{</span>
  <span>let</span> <span>[</span>color<span>,</span> setSolor<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>"red"</span><span>)</span><span>;</span>
  <span>return</span> <span>(</span>
    <span><span><span>&lt;</span></span><span>></span></span><span>
      </span><span><span><span>&lt;</span>input</span>
        <span>type</span><span><span>=</span><span>"</span>color<span>"</span></span>
        <span>value</span><span><span>=</span><span>{</span>color<span>}</span></span>
        <span>onChange</span><span><span>=</span><span>{</span><span>(</span><span>e</span><span>)</span> <span>=></span> <span>setSolor</span><span>(</span>e<span>.</span>target<span>.</span>value<span>)</span><span>}</span></span>
        <span>style</span><span><span>=</span><span>{</span><span>{</span> <span>display</span><span>:</span> <span>"inline-block"</span><span>,</span> <span>marginLeft</span><span>:</span> <span>600</span> <span>}</span><span>}</span></span>
      <span>/></span></span><span>
      </span><span><span><span>&lt;</span>p</span> <span>style</span><span><span>=</span><span>{</span><span>{</span> color <span>}</span><span>}</span></span><span>></span></span><span>Hello, world!</span><span><span><span>&lt;/</span>p</span><span>></span></span><span>
    </span><span><span><span>&lt;/</span></span><span>></span></span>
  <span>)</span><span>;</span>
<span>}</span>

<span>const</span> <span>Demo</span> <span>=</span> <span>(</span><span>)</span> <span>=></span> <span>{</span>
  <span>return</span> <span>(</span>
    <span><span><span>&lt;</span></span><span>></span></span><span>
      </span><span><span><span>&lt;</span><span>App</span></span> <span>/></span></span><span>
      </span><span><span><span>&lt;</span><span>ExpensiveTree</span></span> <span>/></span></span><span>
    </span><span><span><span>&lt;/</span></span><span>></span></span>
  <span>)</span><span>;</span>
<span>}</span><span>;</span>

<span>export</span> <span>default</span> Demo<span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br></div></div><p>å½“ä¸€éƒ¨åˆ† state åœ¨é«˜å¼€é”€æ ‘çš„ä¸Šå±‚ä»£ç ä¸­ä½¿ç”¨æ—¶ä¸Šè¿°è§£æ³•å°±æ— æ³•å¥æ•ˆäº†ã€‚ æ¯”å¦‚ï¼ŒDemo ç»„ä»¶ä¹Ÿéœ€è¦ App ä¸­çš„ color çŠ¶æ€ï¼Œé‚£è¿™æ ·ä¾¿ä¸å¯è§£å†³é—®é¢˜äº†ï¼Ÿæˆ–è€…è¯´åˆå›åˆ°äº† memo å’Œ PureComponent ä¸Šäº†å•¦ï¼Ÿæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ Demo ç»„ä»¶çš„æƒ…å†µã€‚</p>
<div><pre><code><span>const</span> <span>ExpensiveTree</span> <span>=</span> <span>(</span><span>)</span> <span>=></span> <span>{</span>
  <span>let</span> now <span>=</span> performance<span>.</span><span>now</span><span>(</span><span>)</span><span>;</span>
  <span>while</span> <span>(</span>performance<span>.</span><span>now</span><span>(</span><span>)</span> <span>-</span> now <span>&lt;</span> <span>100</span><span>)</span> <span>{</span>
    <span>// Artificial delay -- do nothing for 100ms</span>
  <span>}</span>
  <span>return</span> <span><span><span>&lt;</span>p</span><span>></span></span><span>I am a very slow component tree.</span><span><span><span>&lt;/</span>p</span><span>></span></span><span>;</span>
<span>}</span><span>;</span>

<span>const</span> <span>Demo</span> <span>=</span> <span>(</span><span>)</span> <span>=></span> <span>{</span>
  <span>let</span> <span>[</span>color<span>,</span> setSolor<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>"red"</span><span>)</span><span>;</span>
  <span>return</span> <span>(</span>
    <span><span><span>&lt;</span>div</span> <span>style</span><span><span>=</span><span>{</span><span>{</span> color <span>}</span><span>}</span></span><span>></span></span><span>
      </span><span><span><span>&lt;</span>input</span>
        <span>type</span><span><span>=</span><span>"</span>color<span>"</span></span>
        <span>value</span><span><span>=</span><span>{</span>color<span>}</span></span>
        <span>onChange</span><span><span>=</span><span>{</span><span>(</span><span>e</span><span>)</span> <span>=></span> <span>setSolor</span><span>(</span>e<span>.</span>target<span>.</span>value<span>)</span><span>}</span></span>
        <span>style</span><span><span>=</span><span>{</span><span>{</span> <span>display</span><span>:</span> <span>"inline-block"</span><span>,</span> <span>marginLeft</span><span>:</span> <span>600</span> <span>}</span><span>}</span></span>
      <span>/></span></span><span>
      </span><span><span><span>&lt;</span>p</span> <span>style</span><span><span>=</span><span>{</span><span>{</span> color <span>}</span><span>}</span></span><span>></span></span><span>Hello, world!</span><span><span><span>&lt;/</span>p</span><span>></span></span><span>
      </span><span><span><span>&lt;</span><span>ExpensiveTree</span></span> <span>/></span></span><span>
    </span><span><span><span>&lt;/</span>div</span><span>></span></span>
  <span>)</span><span>;</span>
<span>}</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br></div></div><h3 id="è§£æ³•äºŒ-å†…å®¹æå‡"> è§£æ³•äºŒï¼šå†…å®¹æå‡</h3>
<div><pre><code><span>import</span> React<span>,</span> <span>{</span> useState <span>}</span> <span>from</span> <span>"react"</span><span>;</span>

<span>const</span> <span>ExpensiveTree</span> <span>=</span> <span>(</span><span>)</span> <span>=></span> <span>{</span>
  <span>let</span> now <span>=</span> performance<span>.</span><span>now</span><span>(</span><span>)</span><span>;</span>
  <span>while</span> <span>(</span>performance<span>.</span><span>now</span><span>(</span><span>)</span> <span>-</span> now <span>&lt;</span> <span>100</span><span>)</span> <span>{</span>
    <span>// Artificial delay -- do nothing for 100ms</span>
  <span>}</span>
  <span>return</span> <span><span><span>&lt;</span>p</span><span>></span></span><span>I am a very slow component tree.</span><span><span><span>&lt;/</span>p</span><span>></span></span><span>;</span>
<span>}</span><span>;</span>

<span>// å†…å®¹æå‡</span>
<span>function</span> <span>ColorPicker</span><span>(</span><span><span>{</span> children <span>}</span></span><span>)</span> <span>{</span>
  <span>let</span> <span>[</span>color<span>,</span> setSolor<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>"red"</span><span>)</span><span>;</span>
  <span>return</span> <span>(</span>
    <span><span><span>&lt;</span>div</span> <span>style</span><span><span>=</span><span>{</span><span>{</span> color <span>}</span><span>}</span></span><span>></span></span><span>
      </span><span><span><span>&lt;</span>input</span>
        <span>type</span><span><span>=</span><span>"</span>color<span>"</span></span>
        <span>value</span><span><span>=</span><span>{</span>color<span>}</span></span>
        <span>onChange</span><span><span>=</span><span>{</span><span>(</span><span>e</span><span>)</span> <span>=></span> <span>setSolor</span><span>(</span>e<span>.</span>target<span>.</span>value<span>)</span><span>}</span></span>
        <span>style</span><span><span>=</span><span>{</span><span>{</span> <span>display</span><span>:</span> <span>"inline-block"</span><span>,</span> <span>marginLeft</span><span>:</span> <span>600</span> <span>}</span><span>}</span></span>
      <span>/></span></span><span>
      </span><span><span><span>&lt;</span>p</span><span>></span></span><span>å½“å‰çš„å­—ä½“é¢œè‰²</span><span><span><span>&lt;/</span>p</span><span>></span></span><span>
      </span><span>{</span>children<span>}</span><span>
    </span><span><span><span>&lt;/</span>div</span><span>></span></span>
  <span>)</span><span>;</span>
<span>}</span>

<span>const</span> <span>Demo</span> <span>=</span> <span>(</span><span>)</span> <span>=></span> <span>{</span>
  <span>return</span> <span>(</span>
    <span><span><span>&lt;</span><span>ColorPicker</span></span><span>></span></span><span>
      </span><span><span><span>&lt;</span>p</span><span>></span></span><span>--çˆ¶ç»„ä»¶å†…å®¹--</span><span><span><span>&lt;/</span>p</span><span>></span></span><span>
      </span><span><span><span>&lt;</span><span>ExpensiveTree</span></span> <span>/></span></span><span>
    </span><span><span><span>&lt;/</span><span>ColorPicker</span></span><span>></span></span>
  <span>)</span><span>;</span>
<span>}</span><span>;</span>

<span>export</span> <span>default</span> Demo<span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br></div></div><p>ExpensiveTree ç»„ä»¶ä¸ä¼šé‡æ–°æ¸²æŸ“çš„æ ¹æœ¬åŸå› æ˜¯ï¼ŒColorPicker ç»„ä»¶ä¸­ color æ”¹å˜åç»„ä»¶æ›´æ–°æ—¶ children ä»ç„¶ä¿å­˜ç€ä¸Šä¸€æ¬¡ä»<code>Demo</code>ä¸­æ‹¿åˆ°çš„ç›¸åŒçš„<code>children</code>å±æ€§ ã€‚</p>
<h3 id="æ€»ç»“"> æ€»ç»“</h3>
<p>React ç»„ä»¶çš„æ›´æ–°ï¼Œåªæœ‰ props æˆ– state æ”¹å˜æ‰ä¼šè§¦å‘ã€‚</p>
<ul>
<li>
<p><a href="https://react.docschina.org/docs/react-api.html#reactpurecomponent" target="_blank" rel="noopener noreferrer">React.PureComponent</a></p>
</li>
<li>
<p><a href="https://react.docschina.org/docs/react-api.html#reactmemo" target="_blank" rel="noopener noreferrer">React.memo</a></p>
</li>
<li>
<h3 id="åœ¨ä½ å†™-memo-ä¹‹å‰"> <a href="https://overreacted.io/zh-hans/before-you-memo/" target="_blank" rel="noopener noreferrer">åœ¨ä½ å†™ memo()ä¹‹å‰</a></h3>
</li>
<li>
<p><a href="https://react.docschina.org/docs/hooks-reference.html#usememo" target="_blank" rel="noopener noreferrer">React.useMemo</a></p>
</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>React è¿›é˜¶ä¹‹â€œdiffâ€ç®—æ³•</title>
      <link>https://kangduu.github.io/website/website/react/%E3%80%90%E6%BA%90%E7%A0%81%E3%80%91React%E8%BF%9B%E9%98%B6%E4%B9%8B%E2%80%9Cdiff%E2%80%9D%E7%AE%97%E6%B3%95.html</link>
      <guid>https://kangduu.github.io/website/website/react/%E3%80%90%E6%BA%90%E7%A0%81%E3%80%91React%E8%BF%9B%E9%98%B6%E4%B9%8B%E2%80%9Cdiff%E2%80%9D%E7%AE%97%E6%B3%95.html</guid>
      <source url="https://kangduu.github.io/website/website/rss.xml">React è¿›é˜¶ä¹‹â€œdiffâ€ç®—æ³•</source>
      <category>React</category>
      <pubDate>Mon, 16 May 2022 14:56:12 GMT</pubDate>
      <content:encoded><![CDATA[<h1 id="react-è¿›é˜¶ä¹‹-diff-ç®—æ³•"> React è¿›é˜¶ä¹‹â€œdiffâ€ç®—æ³•</h1>
<h3 id="react-å…ƒç´ çš„-key-å±æ€§æœ‰ä»€ä¹ˆä½œç”¨"> React å…ƒç´ çš„ key å±æ€§æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h3>
<p>è¿™æ˜¯ä¸€é“é¢è¯•å¿…é—®é¢˜ï¼Œé¢è¯•ä¸­ä½ æ˜¯å¦‚ä½•å›ç­”è¿™ä¸ªé—®é¢˜çš„å•¦ã€‚ä»é¢è¯•çš„è§’åº¦æ¥æ€è€ƒè¿™ä¸ªé—®é¢˜ï¼Œé¢è¯•å®˜æœ€æƒ³çŸ¥é“çš„æ˜¯ä½ æ˜¯å¦å¯¹ React åº•å±‚åŸç†æœ‰ä¸€å®šçš„äº†è§£ã€‚è¿™ä¸ªé—®é¢˜å…ˆè®°ä¸‹æ¥ï¼Œæˆ‘ä»¬å…ˆå¯¹<code>Reactçš„â€œdiffingâ€ç®—æ³•</code>è¿›è¡Œæ·±å…¥æ¢è®¨ï¼Œå†å›è¿‡å¤´æ¥å›ç­”è¿™ä¸ªé—®é¢˜ã€‚</p>
]]></content:encoded>
    </item>
    <item>
      <title>ä½ å¯¹ react-fiber æœ‰äº†è§£å—ï¼Ÿ</title>
      <link>https://kangduu.github.io/website/website/react/%E3%80%90%E6%BA%90%E7%A0%81%E3%80%91fiber.html</link>
      <guid>https://kangduu.github.io/website/website/react/%E3%80%90%E6%BA%90%E7%A0%81%E3%80%91fiber.html</guid>
      <source url="https://kangduu.github.io/website/website/rss.xml">ä½ å¯¹ react-fiber æœ‰äº†è§£å—ï¼Ÿ</source>
      <category>React</category>
      <pubDate>Mon, 16 May 2022 14:56:12 GMT</pubDate>
      <content:encoded><![CDATA[<h2 id="ä½ å¯¹-react-fiber-æœ‰äº†è§£å—"> ä½ å¯¹ react-fiber æœ‰äº†è§£å—ï¼Ÿ</h2>
<ol>
<li>å¯¹äº react åŸç†çš„äº†è§£ã€‚</li>
<li>å¯¹äºæ–°æŠ€æœ¯çš„æ•æ„Ÿç¨‹åº¦ï¼Œæ±‚çŸ¥æ¬²ã€‚</li>
</ol>
<h3 id="ç›®çš„"> ç›®çš„</h3>
<ul>
<li>ä¸ºäº†ä½¿ react æ¸²æŸ“çš„è¿‡ç¨‹å¯ä»¥è¢«<strong>ä¸­æ–­</strong>ï¼Œå¯ä»¥å°†æ§åˆ¶æƒäº¤è¿˜ç»™æµè§ˆå™¨ï¼Œå¯ä»¥è®©ä½ç»™<strong>é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡</strong>ï¼Œæµè§ˆå™¨ç©ºé—²åå†æ¢å¤æ¸²æŸ“ã€‚</li>
<li>å¯¹äºè®¡ç®—é‡æ¯”è¾ƒå¤§çš„ js è®¡ç®—æˆ–è€… dom è®¡ç®—ï¼Œå°±ä¸ä¼šæ˜¾å¾—ç‰¹åˆ«çš„å¡é¡¿ï¼Œè€Œæ˜¯ä¸€å¸§ä¸€å¸§çš„æœ‰è§„å¾‹çš„æ‰§è¡Œä»»åŠ¡ã€‚</li>
</ul>
<p>ğŸŒ° ä¸­æ–­</p>
<div><pre><code><span>const</span> tasks <span>=</span> <span>[</span><span>]</span><span>;</span> <span>// å¤šä¸ªä»»åŠ¡ åŒæ­¥</span>

<span>function</span> <span>run</span><span>(</span><span>)</span> <span>{</span>
  <span>let</span> task<span>;</span>
  <span>while</span> <span>(</span><span>(</span>task <span>=</span> tasks<span>.</span><span>shift</span><span>(</span><span>)</span><span>)</span><span>)</span> <span>{</span>
    <span>execute</span><span>(</span>task<span>)</span><span>;</span> <span>// è¿™é‡Œæ‰§è¡Œexecuteéœ€è¦5ç§’å·¦å³æ—¶é—´</span>
  <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><p>è¿™ç§å°±ä¼šå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œæ¯ä¸€ä¸ªä»»åŠ¡éƒ½éœ€è¦å¤§çº¦ 5 ç§’æ—¶é—´ï¼Œé‚£å°±ä¼šå¯¼è‡´é˜»å¡ã€‚
å¦‚æœåœ¨æŸä¸ªä»»åŠ¡å¤„åœæ­¢å•¦ï¼Ÿ</p>
<h3 id="ä½¿ç”¨-generator-æ¨¡æ‹Ÿä¸­æ–­"> <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Generator" target="_blank" rel="noopener noreferrer">ä½¿ç”¨ generator æ¨¡æ‹Ÿä¸­æ–­</a></h3>
<div><pre><code><span>const</span> tasks <span>=</span> <span>[</span><span>]</span><span>;</span> <span>// å¤šä¸ªä»»åŠ¡ åŒæ­¥</span>

<span>function</span><span>*</span> <span>run</span><span>(</span><span>)</span> <span>{</span>
  <span>let</span> task<span>;</span>
  <span>while</span> <span>(</span><span>(</span>task <span>=</span> tasks<span>.</span><span>shift</span><span>(</span><span>)</span><span>)</span><span>)</span> <span>{</span>
    <span>if</span> <span>(</span><span>hasHighPriorityTask</span><span>(</span><span>)</span><span>)</span> <span>{</span>
      <span>yield</span><span>;</span>
    <span>}</span>
    <span>execute</span><span>(</span>task<span>)</span><span>;</span> <span>// è¿™é‡Œæ‰§è¡Œexecuteéœ€è¦5ç§’å·¦å³æ—¶é—´</span>
  <span>}</span>
<span>}</span>

<span>const</span> iterator <span>=</span> <span>run</span><span>(</span><span>)</span><span>;</span>

<span>// æ¢å¤</span>
iterator<span>.</span><span>next</span><span>(</span><span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br></div></div><p>ä¸Šè¾¹çš„ä»£ç ç®€å•çš„å®ç°äº†ä¸­æ–­ä»»åŠ¡å¹¶å¯æ¢å¤ã€‚</p>
<p><strong>ğŸ¤”Questionï¼š</strong> æ—¢ç„¶ generator æœ‰ç±»ä¼¼çš„åŠŸèƒ½ï¼Œä¸ºä»€ä¹ˆ react ä¸ç”¨ å•¦ï¼Ÿ</p>
<ol>
<li>
<p>éœ€è¦ç”¨ generator å°†æ¶‰åŠåˆ°çš„æ‰€æœ‰çš„ä»£ç éƒ½åŒ…è£…æˆ generator * å½¢å¼ï¼Œéå¸¸éº»çƒ¦ï¼Œå·¥ä½œé‡æ¯”è¾ƒå¤§ã€‚</p>
</li>
<li>
<p>generator å†…éƒ¨æ˜¯æœ‰çŠ¶æ€çš„</p>
</li>
</ol>
<div><pre><code><span>function</span><span>*</span> <span>doWork</span><span>(</span><span>a<span>,</span> b</span><span>)</span> <span>{</span>
  <span>const</span> x <span>=</span> <span>doExpensiveWorkA</span><span>(</span>a<span>)</span><span>;</span> <span>// xçš„å€¼ä¾èµ–a</span>
  <span>yield</span><span>;</span>
  <span>const</span> y <span>=</span> <span>doExpensiveWorkA</span><span>(</span>x<span>,</span> b<span>)</span><span>;</span> <span>// ä¾èµ–xçš„å€¼</span>
  <span>return</span> y<span>;</span>
<span>}</span>
<span>// å‡è®¾doExpensiveWorkAä½œç”¨æ˜¯å°†ä¼ å…¥çš„å‚æ•°ç›¸åŠ åå¹¶è¿”å›ç»“æœã€‚</span>
<span>let</span> m <span>=</span> <span>1</span><span>,</span>
  n <span>=</span> <span>2</span><span>;</span>
<span>const</span> working <span>=</span> <span>doWork</span><span>(</span>m<span>,</span> n<span>)</span><span>;</span>
working<span>.</span><span>next</span><span>(</span><span>)</span><span>;</span> <span>// x = m = 1</span>

m <span>=</span> <span>4</span><span>;</span> <span>//å¦‚æœè¿™é‡Œæ”¹å˜äº†mï¼Œä½†æ˜¯xå·²ç»doneäº†ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½æ²¿ç”¨æ—§çš„xå€¼ã€‚</span>
working<span>.</span><span>next</span><span>(</span><span>)</span><span>;</span> <span>// y = x + b = a + b = m + n;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br></div></div><h3 id="å¦‚ä½•åˆ¤æ–­å½“å‰æ˜¯å¦æœ‰é«˜ä¼˜å…ˆçº§ä»»åŠ¡"> å¦‚ä½•åˆ¤æ–­å½“å‰æ˜¯å¦æœ‰é«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼Ÿ</h3>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦æ˜ç™½çš„æ˜¯ï¼Œå½“å‰ js çš„ç¯å¢ƒå…¶å®å¹¶æ²¡æœ‰åŠæ³•å»åˆ¤æ–­æ˜¯å¦æœ‰é«˜ä¼˜ä»»åŠ¡ã€‚<strong>ğŸ¤”Questionï¼š</strong> é‚£ä½ ä¼šæ€ä¹ˆå®ç°æˆ–è€…æ¨¡æ‹Ÿä¸€ä¸ªå•¦ï¼Ÿ</p>
<ul>
<li>
<p>åªèƒ½çº¦å®šä¸€ä¸ªåˆç†çš„æ‰§è¡Œæ—¶é—´ï¼Œå½“è¶…è¿‡è¿™ä¸ªæ‰§è¡Œæ—¶é—´ï¼Œå¦‚æœä»»åŠ¡ä»»ç„¶æ²¡æœ‰æ‰§è¡Œå®Œæˆï¼Œé‚£å°±ä¸­æ–­å½“å‰ä»»åŠ¡ï¼Œå°†æ§åˆ¶æƒäº¤è¿˜ç»™æµè§ˆå™¨ã€‚</p>
<p>æ™®éçš„æ˜¾ç¤ºå™¨éƒ½æ˜¯æ¯ç§’ 60 å¸§ï¼Œ<strong>1000ms / 60fps = 16ms</strong>ã€‚å¤§æ¦‚å°±æ˜¯ä¸€å¸§çš„æ—¶é—´å¤§çº¦æ˜¯ 16 æ¯«ç§’ã€‚</p>
</li>
<li>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/requestIdleCallback" target="_blank" rel="noopener noreferrer">requestIdleCallback(callback[, options])</a> : callback å‡½æ•°å°†åœ¨<strong>æµè§ˆå™¨ç©ºé—²æ—¶æœŸ</strong>è¢«è°ƒç”¨ã€‚</p>
<p>å¹¶ä¸” callback å‡½æ•°ä¼šæ¥æ”¶åˆ°ä¸€ä¸ªåä¸º IdleDeadline çš„å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥è·å–å½“å‰ç©ºé—²æ—¶é—´ä»¥åŠå›è°ƒæ˜¯å¦åœ¨è¶…æ—¶æ—¶é—´å‰å·²ç»æ‰§è¡Œçš„çŠ¶æ€ã€‚</p>
</li>
<li>
<p>æµè§ˆå™¨åœ¨ä¸€å¸§å†…è¦åšä»€ä¹ˆäº‹æƒ…ï¼Ÿ</p>
<ol>
<li>å¤„ç†ç”¨æˆ·è¾“å…¥äº‹ä»¶</li>
<li>JS çš„æ‰§è¡Œ</li>
<li>requestAnimation è°ƒç”¨</li>
<li>å¸ƒå±€ layout</li>
<li>ç»˜åˆ¶ paint</li>
</ol>
<blockquote>
<p>16ms ä¸€å¸§æ—¶é—´å†…ï¼Œæµè§ˆå™¨å°±æ²¡æœ‰ç©ºé—²æ—¶é—´ï¼Œ
å³ 0ms -&gt; requestIdleCallback å°†æ²¡æœ‰æ—¶é—´è¢«è°ƒç”¨
é‚£ä¸€ç›´éƒ½æ²¡æœ‰ç©ºé—²æ—¶é—´å•¦ï¼Ÿ</p>
</blockquote>
</li>
<li>
<p>æµè§ˆå™¨å¾ˆå¿™æ€ä¹ˆåŠï¼Ÿï¼ˆç©ºé—²æ—¶é—´ä¸º 0ï¼‰</p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/requestIdleCallback" target="_blank" rel="noopener noreferrer">requestIdleCallback(callback[, options])</a> ç¬¬äºŒä¸ªå‚æ•° <strong>{ timeout: 100 }</strong></p>
<div><pre><code>window<span>.</span><span>requestIdleCallback</span><span>(</span>
  <span>(</span><span>args</span><span>)</span> <span>=></span> <span>{</span>
    console<span>.</span><span>log</span><span>(</span>args<span>)</span><span>;</span>
  <span>}</span><span>,</span>
  <span>{</span>
    <span>timeout</span><span>:</span> <span>100</span><span>,</span>
    <span>//å¦‚æœæŒ‡å®šäº†timeoutï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªæ­£å€¼ï¼Œè€Œå›è°ƒåœ¨timeoutæ¯«ç§’è¿‡åè¿˜æ²¡æœ‰è¢«è°ƒç”¨ï¼Œé‚£ä¹ˆå›è°ƒä»»åŠ¡å°†æ”¾å…¥äº‹ä»¶å¾ªç¯ä¸­æ’é˜Ÿï¼Œå³ä½¿è¿™æ ·åšæœ‰å¯èƒ½å¯¹æ€§èƒ½äº§ç”Ÿè´Ÿé¢å½±å“ã€‚</span>
  <span>}</span>
<span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br></div></div></li>
</ul>
<blockquote>
<blockquote>
<blockquote>
<p><a href="https://caniuse.com/?search=requestIdleCallback" target="_blank" rel="noopener noreferrer">requestIdelCallback çš„å…¼å®¹æ€§</a> å¾ˆå·®</p>
</blockquote>
</blockquote>
</blockquote>
<h2 id="è¯´è¯´-react-æ˜¯å¦‚ä½•å®ç°-requestidlecallback-çš„"> è¯´è¯´ react æ˜¯å¦‚ä½•å®ç° requestIdleCallback çš„ï¼Ÿ</h2>
<blockquote>
<p>é€šè¿‡ messageChannel æ¨¡æ‹Ÿå®ç°</p>
</blockquote>
<h2 id="react-ä¸­çš„ä»»åŠ¡ä¼˜å…ˆçº§"> react ä¸­çš„ä»»åŠ¡ä¼˜å…ˆçº§ï¼Ÿ</h2>
<p>5 ä¸ªä¼˜å…ˆçº§ï¼š</p>
<ol>
<li><strong>Immediate</strong> æœ€é«˜ä¼˜å…ˆçº§ï¼Œè¿™ä¸ªä¼˜å…ˆçº§çš„ä»»åŠ¡åº”è¯¥é©¬ä¸Šè¢«æ‰§è¡Œï¼Œä¸”ä¸èƒ½ä¸­æ–­ï¼›</li>
<li><strong>UserBlocking</strong> è¿™äº›ä»»åŠ¡ä¸€èˆ¬æ˜¯ç”¨æˆ·äº¤äº’çš„ç»“æœï¼Œéœ€è¦åŠæ—¶å¾—åˆ°åé¦ˆï¼›</li>
<li><strong>Normal</strong> ä¸éœ€è¦ç”¨æˆ·ç«‹åˆ»èƒ½æ„Ÿå—åˆ°çš„å˜åŒ–ï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚ç­‰ï¼›</li>
<li><strong>Low</strong> è¿™äº›ä»»åŠ¡å¯ä»¥è¢«å»¶åï¼Œä½†æ˜¯æœ€ç»ˆä¹Ÿéœ€è¦è¢«æ‰§è¡Œï¼›</li>
<li><strong>Idle</strong> å¯ä»¥è¢«æ— é™æœŸå»¶åï¼Œæ¯”å¦‚ console</li>
</ol>
<blockquote>
<blockquote>
<blockquote>
<p>åŒä¸€çº§åˆ«çš„ä»»åŠ¡ï¼Œå…ˆåé¡ºåº</p>
</blockquote>
</blockquote>
</blockquote>
]]></content:encoded>
    </item>
    <item>
      <title>é¦–é¡µ</title>
      <link>https://kangduu.github.io/website/website/</link>
      <guid>https://kangduu.github.io/website/website/</guid>
      <source url="https://kangduu.github.io/website/website/rss.xml">é¦–é¡µ</source>
      <pubDate>Fri, 29 Apr 2022 09:54:32 GMT</pubDate>
    </item>
    <item>
      <title>TypeScript Syntax</title>
      <link>https://kangduu.github.io/website/website/typescript/</link>
      <guid>https://kangduu.github.io/website/website/typescript/</guid>
      <source url="https://kangduu.github.io/website/website/rss.xml">TypeScript Syntax</source>
      <description>TypeScript is a strongly typed programming language that builds on JavaScript, giving you better tooling at any scale.</description>
      <category>React</category>
      <pubDate>Thu, 05 May 2022 10:01:30 GMT</pubDate>
      <content:encoded><![CDATA[<h1 id="é˜…è¯»è§’"> é˜…è¯»è§’</h1>
<ul>
<li><a href="https://ts.yayujs.com/" target="_blank" rel="noopener noreferrer">TypeScript-yy</a></li>
</ul>
]]></content:encoded>
    </item>
  </channel>
</rss>